(()=>{var t,e={9619:(t,e,n)=>{"use strict";const r=n(4692),o=n(6185);r((()=>{const t=(0,o.cleanTitle)(r("#wrapper > h1 > span").text()),e=r("#info > span:nth-child(1) > a").text()||r("#info > a:nth-child(2)").text();chrome.runtime.sendMessage(t,(t=>{var n;n=function(t,e){const{parts:n,books:r}=t;return r.slice(0,5).map((t=>Object.assign(Object.assign({},t),{titleScore:(0,o.calculateScore)(t.bookInfo.title,n),authorSimilarity:(0,o.calculateSimilarity)(e,t.bookInfo.author)}))).filter((t=>t.titleScore>=.5&&t.authorSimilarity>.3)).sort(((t,e)=>e.titleScore*e.authorSimilarity-t.titleScore*t.authorSimilarity))}(t,e),r("#buyinfo").before(function(t){let e=t.reduce(((t,e)=>{const n="https://weread.qq.com/web/reader/"+(0,o.calculateBookStrId)(e.bookInfo.bookId),r=(0===e.bookInfo.soldout?"":'<span style="font-weight: bold; border-radius: 5px; border: solid 1px; padding: 0 2px; margin-right: 3px;">已下架</span>')+e.bookInfo.title;return t+`<li style="width: 275px; display: inline-block; zoom: 1; overflow: hidden; margin: 0 0 12px 0; vertical-align: top;">\n        <div>\n          <div style="float: none; vertical-align: top; display: inline-block; zoom: 1; margin-right: 16px;">\n            <a target="_blank" href="${n}">\n              <img src="${e.bookInfo.cover}" style="max-width: 70px;">\n            </a>\n          </div>\n          <div style="max-width: 170px; display: inline-block; zoom: 1; overflow: hidden;">\n            <div>\n              <a target="_blank" href="${n}">${r}</a>\n            </div>\n            <div>${e.bookInfo.author}</div>\n            <div><a target="_blank" href="${n}">去看看 ></a></div>\n          </div>\n        </div>\n      </li>`}),"");return e=e?`<ul>${e}</ul>`:'<div><span>微信读书好像没有收录这本书 🤔️ </span><a target="_blank" href="https://weread.qq.com/web/#search">我要去搜搜 ></a></div>',`\n    <div class="gray_ad">\n        <div>\n            <h2><span>✳️ 在微信读书中可读 </span>&nbsp;·&nbsp;·&nbsp;·&nbsp;·&nbsp;·&nbsp;·</h2>\n            ${e}\n        </div>\n    </div>\n    `}(n))}))}))},6185:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateBookStrId=function(t){const e=r.createHash("md5").update(t).digest("hex");let n=e.substr(0,3);const[o,i]=function(t){const e=t.length;if(/^\d*$/.test(t)){const n=[];for(let r=0;r<e;r+=9)n.push(parseInt(t.slice(r,Math.min(r+9,e))).toString(16));return["3",n]}let n="";for(let r=0;r<e;r++)n+=t.charCodeAt(r).toString(16);return["4",[n]]}(t);n+=o+"2"+e.substr(e.length-2,2);for(let t=0;t<i.length;t++){let e=i[t].length.toString(16);1===e.length&&(e="0"+e),n+=e+i[t],t<i.length-1&&(n+="g")}return n.length<20&&(n+=e.substr(0,20-n.length)),n+=r.createHash("md5").update(n).digest("hex").substr(0,3),n},e.calculateScore=function(t,e){return e.map((e=>t.includes(e))).reduce(((t,e)=>t+Number(e)),0)/e.length},e.calculateSimilarity=function(t,e){const n=new Set([...e]);return new Set([...t].filter((t=>n.has(t)))).size/new Set([...t,...e]).size},e.cleanTitle=function(t){return t.replace(/（.+）/,"")};const r=n(1565)},8982:()=>{},7790:()=>{},3776:()=>{},7965:()=>{},6089:()=>{},9368:()=>{},4688:()=>{},1069:()=>{},5340:()=>{},9838:()=>{},3779:()=>{},7199:()=>{}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=e,t=[],r.O=(e,n,o,i)=>{if(!n){var a=1/0;for(d=0;d<t.length;d++){for(var[n,o,i]=t[d],l=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every((t=>r.O[t](n[s])))?n.splice(s--,1):(l=!1,i<a&&(a=i));if(l){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,o,i]},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={80:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,i,[a,l,s]=n,c=0;if(a.some((e=>0!==t[e]))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(s)var d=s(r)}for(e&&e(n);c<a.length;c++)i=a[c],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(d)},n=self.webpackChunkweReaDou=self.webpackChunkweReaDou||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var o=r.O(void 0,[121],(()=>r(9619)));o=r.O(o)})();